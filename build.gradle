apply plugin: 'java'
apply plugin: 'eclipse'
apply plugin: 'shadow'
apply plugin: 'distribution'

repositories {
    jcenter()
    mavenCentral()
    maven {
        url "https://oss.sonatype.org/content/repositories/snapshots/"
    }
}

buildDir = 'target'

sourceCompatibility = '1.7'
targetCompatibility = '1.7'

ext.groovyVersion = System.properties.getProperty('groovyVersion', '2.4.1') // by default
println "Groovy version: ${groovyVersion}" 

dependencies {
    compile "org.codehaus.groovy:groovy-all:${groovyVersion}"
    compile 'com.fasterxml.jackson.core:jackson-databind:2.7.4'
    compile 'com.fasterxml.jackson.module:jackson-module-afterburner:2.7.4'
    compile 'com.google.code.gson:gson:2.6.2'
    compile 'io.fastjson:boon:0.33'
    compile 'com.wizzardo.tools:tools:0.14-SNAPSHOT'
    compile 'com.alibaba:fastjson:1.2.12'
    compile 'org.json:json:20160212'
    compile 'javax.json:javax.json-api:1.0'
    compile 'org.glassfish:javax.json:1.0.4'

    compile 'org.openjdk.jmh:jmh-core:1.12'
    compile 'org.openjdk.jmh:jmh-generator-annprocess:1.12'

//    compile fileTree(dir: 'libs', include: '*.jar')
}

repositories {
    jcenter()
}

buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath 'com.github.jengelman.gradle.plugins:shadow:0.8'
    }
}

shadow {
    outputFile = new File("${buildDir}/benchmarks.jar")

    transformer(com.github.jengelman.gradle.plugins.shadow.transformers.ManifestResourceTransformer) {
        mainClass = 'org.openjdk.jmh.Main'
    }
}

task createGradleWrapper(type: Wrapper) {
    gradleVersion = '1.11'
}
